// config/api.js
// API konfigur치ci칩 a frontend sz치m치ra

// Backend URL konstansok - explicit string liter치lok
const DEV_BACKEND_URL = 'http://127.0.0.1:8000';
const PROD_BACKEND_URL = 'https://treasurehunter-mz1x.onrender.com';

// Debug log a build sz치m치ra
console.log('游댌 DEV_BACKEND_URL:', DEV_BACKEND_URL);
console.log('游댌 PROD_BACKEND_URL:', PROD_BACKEND_URL);

// Explicit backend URL export치l치sa a build sz치m치ra
export const BACKEND_URL = PROD_BACKEND_URL;
export const DEV_URL = DEV_BACKEND_URL;

// API konfigur치ci칩 objektum
export const API_CONFIG = {
  // Fejleszt칠si k칬rnyezet
  development: {
    baseUrl: DEV_BACKEND_URL
  },
  
  // Production k칬rnyezet
  production: {
    baseUrl: PROD_BACKEND_URL
  }
};

// API URL lek칠rdez칠si f칲ggv칠ny
export const getApiBaseUrl = () => {
  const mode = import.meta.env.MODE || 'production';
  const config = API_CONFIG[mode] || API_CONFIG.production;
  
  // Ha production m칩dban vagyunk, pr칩b치ljuk meg dinamikusan meghat치rozni
  if (mode === 'production') {
    const currentHost = window.location.hostname;
    
    // Ha a frontend 칠s backend ugyanazon a domain-en van (pl. Render.com)
    if (currentHost.includes('onrender.com')) {
      // Ha a frontend domain tartalmazza a 'frontend' sz칩t, cser칠lj칲k le 'backend'-re
      if (currentHost.includes('frontend')) {
        return 'https://' + currentHost.replace('frontend', 'backend');
      }
    }
  }
  
  return config.baseUrl;
};

// Explicit backend URL export치l치sa a build sz치m치ra
export const BACKEND_URL_ALT = PROD_BACKEND_URL;
export const DEV_URL_ALT = DEV_BACKEND_URL;

// Tov치bbi explicit exportok a build sz치m치ra
export const PROD_URL = 'https://treasurehunter-mz1x.onrender.com';
export const DEV_URL_ALT2 = 'http://127.0.0.1:8000';

// Tov치bbi explicit exportok a build sz치m치ra
export const BACKEND_URL_ALT2 = 'https://treasurehunter-mz1x.onrender.com';
export const DEV_URL_ALT3 = 'http://127.0.0.1:8000';

// Tov치bbi explicit exportok a build sz치m치ra
export const BACKEND_URL_ALT3 = 'https://treasurehunter-mz1x.onrender.com';
export const DEV_URL_ALT4 = 'http://127.0.0.1:8000';

// Tov치bbi explicit exportok a build sz치m치ra
export const BACKEND_URL_ALT4 = 'https://treasurehunter-mz1x.onrender.com';
export const DEV_URL_ALT5 = 'http://127.0.0.1:8000';
