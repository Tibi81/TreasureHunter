# üéÉ Halloween Treasure Hunter - GitHub ‚Üí Render.com Deployment Guide

## üìã El≈ëk√©sz√≠t√©s

### 1. GitHub Repository l√©trehoz√°sa

1. **GitHub.com** ‚Üí **New Repository**
2. **Repository name**: `treasurehunter` (vagy tetsz≈ëleges n√©v)
3. **Description**: `üéÉ Halloween-themed treasure hunting game with React frontend and Django backend`
4. **Public** ‚úÖ (aj√°nlott portfolio miatt)
5. **Add README** ‚úÖ
6. **Create repository**

### 2. Lok√°lis repository √∂sszekapcsol√°sa

```bash
# A projekt mapp√°j√°ban
git init
git add .
git commit -m "Initial commit: Halloween Treasure Hunter game"

# GitHub repository hozz√°ad√°sa
git remote add origin https://github.com/[USERNAME]/treasurehunter.git
git branch -M main
git push -u origin main
```

---

## üöÄ Render.com K√ºl√∂n Szolg√°ltat√°sok Deployment

### 1. Render.com regisztr√°ci√≥

1. **Render.com** ‚Üí **Sign Up**
2. **GitHub** fi√≥kkal bejelentkez√©s
3. **Authorize** Render alkalmaz√°s

### 2. PostgreSQL Database l√©trehoz√°sa

1. **Dashboard** ‚Üí **New** ‚Üí **PostgreSQL**
2. **Name**: `treasurehunt-db`
3. **Database**: `treasurehunt`
4. **User**: `treasurehunt_user`
5. **Region**: `Frankfurt (EU Central)` (aj√°nlott)
6. **Plan**: `Free` (kezd√©shez)
7. **Create Database**

### 3. Backend Web Service l√©trehoz√°sa

1. **Dashboard** ‚Üí **New** ‚Üí **Web Service**
2. **Connect GitHub** ‚Üí **treasurehunter** repository
3. **Root Directory**: `backend`
4. **Environment**: `Python 3`
5. **Build Command**:
   ```bash
   pip install -r requirements.txt && python manage.py collectstatic --noinput && python manage.py migrate
   ```
6. **Start Command**:
   ```bash
   gunicorn --config gunicorn.conf.py config.wsgi:application
   ```
7. **Publish Directory**: `backend`

### 4. Frontend Static Site l√©trehoz√°sa

1. **Dashboard** ‚Üí **New** ‚Üí **Static Site**
2. **Connect GitHub** ‚Üí **treasurehunter** repository
3. **Root Directory**: `frontend`
4. **Build Command**:
   ```bash
   npm install && npm run build
   ```
5. **Publish Directory**: `dist`

### 5. Environment Variables be√°ll√≠t√°sa

#### **Backend Service Settings** ‚Üí **Environment**:

```bash
SECRET_KEY=django-insecure-your-new-secret-key-here-make-it-long-and-random
DEBUG=False
DATABASE_URL=postgresql://treasurehunt_user:password@host:port/treasurehunt

# Production optimaliz√°l√°s
GUNICORN_WORKERS=2
GUNICORN_BIND=0.0.0.0:$PORT
GUNICORN_LOG_LEVEL=info

# Redis cache (opcion√°lis, de aj√°nlott)
REDIS_URL=redis://red-xxxxx:6379

# Rate limiting (production √©rt√©kek)
RATE_LIMIT_ANON=200/hour
RATE_LIMIT_USER=1000/hour
RATE_LIMIT_API=500/hour
RATE_LIMIT_GAME=100/hour
RATE_LIMIT_QR=50/hour
```

**Fontos**: A `DATABASE_URL` automatikusan gener√°l√≥dik a PostgreSQL service-ben!

---

## üîß Architekt√∫ra Magyar√°zata

### Mi√©rt k√ºl√∂n szolg√°ltat√°sok?

#### **A. Frontend (Static Site):**
- ‚úÖ **Gyors bet√∂lt√©s**: CDN-en szolg√°ltatott statikus f√°jlok
- ‚úÖ **Sk√°l√°zhat√≥s√°g**: Automatikus CDN terjeszt√©s
- ‚úÖ **Egyszer≈± deploy**: Csak build √©s upload
- ‚úÖ **Ingyenes**: Render.com Static Site ingyenes

#### **B. Backend (Web Service):**
- ‚úÖ **API szolg√°ltat√°s**: Django REST Framework
- ‚úÖ **Adatb√°zis kapcsolat**: PostgreSQL
- ‚úÖ **Session kezel√©s**: Cookie-k √©s session token-ek
- ‚úÖ **Rate limiting**: API v√©delem

#### **C. Kommunik√°ci√≥:**
- ‚úÖ **CORS**: Cross-Origin Resource Sharing be√°ll√≠tva
- ‚úÖ **HTTPS**: Biztons√°gos kommunik√°ci√≥
- ‚úÖ **Cookie-k**: Session kezel√©s domain-ek k√∂z√∂tt

---

## ‚öõÔ∏è Frontend Build Folyamat

### 1. Vite Configuration

**frontend/vite.config.js**:
```javascript
export default defineConfig({
  plugins: [react(), tailwindcss()],
  build: {
    outDir: 'dist', // Standard dist mappa
    emptyOutDir: true,
    assetsDir: 'assets',
    rollupOptions: {
      output: {
        entryFileNames: 'assets/index.js',
        chunkFileNames: 'assets/[name].js',
        assetFileNames: 'assets/[name].[ext]'
      }
    }
  }
})
```

### 2. API Service (Automatikus)

**frontend/src/services/api.js**:
```javascript
const getApiBaseUrl = () => {
  // Mindig haszn√°ld a jelenlegi domain-t (build m√≥dban)
  return window.location.origin;
};

const API_BASE_URL = getApiBaseUrl();
```

**Fontos**: A frontend automatikusan a jelenlegi domain-t haszn√°lja API h√≠v√°sokhoz!

---

## üîÑ K√≥d friss√≠t√©sek

### 1. Backend settings.py friss√≠t√©se

```python
# backend/config/settings.py
ALLOWED_HOSTS = [
    'localhost',
    '127.0.0.1',
    'treasurehunt-backend.onrender.com',  # Backend service
    'treasurehunter-mz1x.onrender.com',  # Aktu√°lis Backend domain
    '.onrender.com',  # Minden Render subdomain
]

CORS_ALLOWED_ORIGINS = [
    "http://localhost:5173",
    "http://127.0.0.1:5173",
    "https://treasurehunt-frontend.onrender.com",  # Frontend service
    "https://treasurehunter-frontend.onrender.com",  # Aktu√°lis Frontend domain
    "https://*.onrender.com",  # Minden Render subdomain
]
```

### 2. Frontend API URL (automatikus)

A frontend automatikusan a jelenlegi domain-t haszn√°lja API h√≠v√°sokhoz, nincs sz√ºks√©g k√ºl√∂n be√°ll√≠t√°sra.

### 3. Production deployment ellen≈ërz√©se

**Fontos**: Ellen≈ërizd, hogy ezek a f√°jlok l√©teznek:
- ‚úÖ `backend/gunicorn.conf.py` - Production Gunicorn konfigur√°ci√≥
- ‚úÖ `backend/requirements.txt` - Python dependencies
- ‚úÖ `frontend/package.json` - Node.js dependencies
- ‚úÖ `frontend/vite.config.js` - Frontend build konfigur√°ci√≥

### 4. GitHub-ra push

```bash
git add .
git commit -m "K√ºl√∂n szolg√°ltat√°sok deployment konfigur√°ci√≥"
git push origin main
```

---

## üß™ Tesztel√©s

### 1. Backend API tesztel√©se

```bash
# Alapvet≈ë API teszt
curl https://treasurehunt-backend.onrender.com/api/games/

# Rate limiting teszt
curl -v https://treasurehunt-backend.onrender.com/api/player/check-session/

# Health check
curl https://treasurehunt-backend.onrender.com/admin/
```

### 2. Frontend tesztel√©se

1. **Nyisd meg** a frontend URL-t: `https://treasurehunt-frontend.onrender.com`
2. **Teszteld** a j√°t√©k funkcionalit√°st
3. **Ellen≈ërizd** a konzol hib√°kat
4. **Teszteld** a rate limiting-et (t√∂bb gyors k√©r√©s)

### 3. Teljes funkcionalit√°s tesztel√©se

1. **J√°t√©k l√©trehoz√°sa** (Admin)
2. **J√°t√©kos regisztr√°ci√≥**
3. **QR k√≥d beolvas√°s**
4. **J√°t√©k v√©gigj√°tsz√°sa**
5. **Logok ellen≈ërz√©se** (Service ‚Üí Logs)

---

## üö® Hibaelh√°r√≠t√°s

### Gyakori probl√©m√°k:

1. **Build Error**: 
   - Ellen≈ërizd a `requirements.txt` √©s `package.json`
   - Gy≈ëz≈ëdj meg r√≥la, hogy a `gunicorn.conf.py` l√©tezik
   - Ellen≈ërizd a `vite.config.js` be√°ll√≠t√°sokat

2. **Frontend nem t√∂lt be**: 
   - Ellen≈ërizd a `frontend/vite.config.js` `outDir` be√°ll√≠t√°st
   - Ellen≈ërizd a `dist` mappa tartalm√°t

3. **Database Error**: 
   - Ellen≈ërizd a `DATABASE_URL`
   - Futtasd `python manage.py migrate`

4. **CORS Error**: 
   - Ellen≈ërizd a `CORS_ALLOWED_ORIGINS` be√°ll√≠t√°sokat
   - Gy≈ëz≈ëdj meg r√≥la, hogy a frontend URL benne van

5. **Rate Limiting Error**: 
   - Ellen≈ërizd a rate limiting environment v√°ltoz√≥kat
   - Logokban keresd a "Rate limit exceeded" √ºzeneteket

6. **Gunicorn Error**: 
   - Ellen≈ërizd a `gunicorn.conf.py` f√°jlt
   - Gy≈ëz≈ëdj meg r√≥la, hogy a `GUNICORN_WORKERS` be van √°ll√≠tva

### Gyors Jav√≠t√°sok:

#### **Backend Build Command (Render Dashboard):**
```bash
pip install -r requirements.txt && python manage.py collectstatic --noinput && python manage.py migrate
```

#### **Backend Start Command (Render Dashboard):**
```bash
gunicorn --config gunicorn.conf.py config.wsgi:application
```

#### **Frontend Build Command (Render Dashboard):**
```bash
npm install && npm run build
```

#### **Environment Variables (Backend Service):**
```bash
SECRET_KEY=django-insecure-your-new-secret-key-here-make-it-long-and-random
DEBUG=False
DATABASE_URL=postgresql://treasurehunt_user:password@host:port/treasurehunt
```

### Logok ellen≈ërz√©se:

1. **Backend Service** ‚Üí **Logs**
2. **Frontend Service** ‚Üí **Logs**
3. **Database Service** ‚Üí **Logs**

**Fontos**: A production logging m√°r be van √°ll√≠tva, r√©szletes logokat tal√°lsz!

---

## üéâ Sikeres Deployment!

**Backend URL**: `https://treasurehunt-backend.onrender.com`
**Frontend URL**: `https://treasurehunt-frontend.onrender.com`

### Production kapacit√°s:
- ‚úÖ **200-500 egyidej≈± felhaszn√°l√≥**
- ‚úÖ **25-50 egyidej≈± j√°t√©k**
- ‚úÖ **Rate limiting akt√≠v**
- ‚úÖ **Security headers be√°ll√≠tva**
- ‚úÖ **Logging √©s monitoring**
- ‚úÖ **CDN gyors bet√∂lt√©s**

### K√∂vetkez≈ë l√©p√©sek:

1. **Custom domain** be√°ll√≠t√°sa (opcion√°lis)
2. **SSL certificate** automatikus
3. **Monitoring** be√°ll√≠t√°sa
4. **Backup** strat√©gia
5. **Redis cache** hozz√°ad√°sa (teljes√≠tm√©ny jav√≠t√°s)

### Performance monitoring:

```bash
# Backend teljes√≠tm√©ny ellen≈ërz√©se
curl -w "@curl-format.txt" -o /dev/null -s https://treasurehunt-backend.onrender.com/api/games/

# Frontend bet√∂lt√©si id≈ë ellen≈ërz√©se
curl -w "@curl-format.txt" -o /dev/null -s https://treasurehunt-frontend.onrender.com/

# Rate limiting teszt
for i in {1..10}; do curl -s https://treasurehunt-backend.onrender.com/api/player/check-session/; done
```

---

## üìû Seg√≠ts√©g sz√ºks√©g eset√©n

- **Render.com Documentation**: https://render.com/docs
- **Django Deployment**: https://docs.djangoproject.com/en/stable/howto/deployment/
- **Vite Build**: https://vitejs.dev/guide/build.html

**Sikeres deployment-et! üöÄüéÉ**