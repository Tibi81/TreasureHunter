# üéÉ Halloween Treasure Hunter - GitHub ‚Üí Render.com Deployment Guide

## üìã El≈ëk√©sz√≠t√©s

### 1. GitHub Repository l√©trehoz√°sa

1. **GitHub.com** ‚Üí **New Repository**
2. **Repository name**: `halloween-treasure-hunter`
3. **Description**: `üéÉ Halloween-themed treasure hunting game with React frontend and Django backend`
4. **Public** ‚úÖ (aj√°nlott portfolio miatt)
5. **Add README** ‚úÖ
6. **Create repository**

### 2. Lok√°lis repository √∂sszekapcsol√°sa

```bash
# A projekt mapp√°j√°ban
git init
git add .
git commit -m "Initial commit: Halloween Treasure Hunter game"

# GitHub repository hozz√°ad√°sa
git remote add origin https://github.com/[USERNAME]/halloween-treasure-hunter.git
git branch -M main
git push -u origin main
```

---

## üóÑÔ∏è Render.com Backend Setup

### 1. Render.com regisztr√°ci√≥

1. **Render.com** ‚Üí **Sign Up**
2. **GitHub** fi√≥kkal bejelentkez√©s
3. **Authorize** Render alkalmaz√°s

### 2. PostgreSQL Database l√©trehoz√°sa

1. **Dashboard** ‚Üí **New** ‚Üí **PostgreSQL**
2. **Name**: `treasure-hunter-db`
3. **Database**: `treasurehunter`
4. **User**: `treasurehunter_user`
5. **Region**: `Oregon (US West)` (legk√∂zelebbi)
6. **Plan**: `Free` (kezd√©shez)
7. **Create Database**

### 3. Backend Service l√©trehoz√°sa

1. **Dashboard** ‚Üí **New** ‚Üí **Web Service**
2. **Connect GitHub** ‚Üí **halloween-treasure-hunter** repository
3. **Root Directory**: `backend`
4. **Environment**: `Python 3`
5. **Build Command**:
   ```bash
   pip install -r requirements.txt && python manage.py collectstatic --noinput && python manage.py migrate
   ```
6. **Start Command**:
   ```bash
   gunicorn --config gunicorn.conf.py config.wsgi:application
   ```

**Fontos**: A `gunicorn.conf.py` f√°jl m√°r tartalmazza a production be√°ll√≠t√°sokat!

### 4. Environment Variables be√°ll√≠t√°sa

**Service Settings** ‚Üí **Environment**:

```bash
SECRET_KEY=django-insecure-your-new-secret-key-here-make-it-long-and-random
DEBUG=False
DATABASE_URL=postgresql://treasurehunter_user:password@host:port/treasurehunter

# Production optimaliz√°l√°s
GUNICORN_WORKERS=4
GUNICORN_BIND=0.0.0.0:8000
GUNICORN_LOG_LEVEL=info

# Redis cache (opcion√°lis, de aj√°nlott)
REDIS_URL=redis://localhost:6379/1

# Rate limiting (production √©rt√©kek)
RATE_LIMIT_ANON=200/hour
RATE_LIMIT_USER=1000/hour
RATE_LIMIT_API=500/hour
RATE_LIMIT_GAME=100/hour
RATE_LIMIT_QR=50/hour
```

**Fontos**: A `DATABASE_URL` automatikusan gener√°l√≥dik a PostgreSQL service-ben!
**Megjegyz√©s**: Redis opcion√°lis, de javasolt a jobb teljes√≠tm√©ny√©rt!

### 5. Backend Deploy

1. **Create Web Service**
2. **V√°rj** a build-re (2-3 perc)
3. **Ellen≈ërizd** a logokat hib√°k√©rt
4. **Jegyezd fel** a backend URL-t: `https://halloween-treasure-hunter.onrender.com`

---

## ‚öõÔ∏è Render.com Frontend Setup

### 1. Frontend Service l√©trehoz√°sa

1. **Dashboard** ‚Üí **New** ‚Üí **Static Site**
2. **Connect GitHub** ‚Üí **halloween-treasure-hunter** repository
3. **Root Directory**: `frontend`
4. **Build Command**:
   ```bash
   npm install && npm run build
   ```
5. **Publish Directory**: `dist`

### 2. Frontend Deploy

1. **Create Static Site**
2. **V√°rj** a build-re (1-2 perc)
3. **Jegyezd fel** a frontend URL-t: `https://halloween-treasure-hunter-frontend.onrender.com`

---

## üîß Domain √©s CORS Be√°ll√≠t√°sok

### 1. Backend Domain friss√≠t√©se

**Backend Service** ‚Üí **Settings** ‚Üí **Environment**:

```bash
ALLOWED_HOSTS=halloween-treasure-hunter.onrender.com,halloween-treasure-hunter-frontend.onrender.com
```

### 2. CORS be√°ll√≠t√°sok friss√≠t√©se

**Backend Service** ‚Üí **Settings** ‚Üí **Environment**:

```bash
CORS_ALLOWED_ORIGINS=https://halloween-treasure-hunter-frontend.onrender.com
CSRF_TRUSTED_ORIGINS=https://halloween-treasure-hunter-frontend.onrender.com
```

### 3. Frontend API URL friss√≠t√©se

**Frontend Service** ‚Üí **Settings** ‚Üí **Environment**:

```bash
REACT_APP_API_URL=https://halloween-treasure-hunter.onrender.com
```

---

## üîÑ K√≥d friss√≠t√©sek

### 1. Backend settings.py friss√≠t√©se

```python
# backend/config/settings.py
ALLOWED_HOSTS = [
    'localhost',
    '127.0.0.1',
    'halloween-treasure-hunter.onrender.com',  # Render backend
    'halloween-treasure-hunter-frontend.onrender.com',  # Render frontend
    '.onrender.com',  # Minden Render subdomain
]

CORS_ALLOWED_ORIGINS = [
    "http://localhost:5173",
    "http://127.0.0.1:5173",
    "https://halloween-treasure-hunter-frontend.onrender.com",  # Render frontend
]

# Production security headers m√°r be√°ll√≠tva
# Logging konfigur√°ci√≥ m√°r be√°ll√≠tva
# Rate limiting m√°r optimaliz√°lva
```

### 2. Frontend API URL friss√≠t√©se

```javascript
// frontend/src/services/api.js
const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';
```

### 3. Production deployment ellen≈ërz√©se

**Fontos**: Ellen≈ërizd, hogy ezek a f√°jlok l√©teznek:
- ‚úÖ `backend/gunicorn.conf.py` - Production Gunicorn konfigur√°ci√≥
- ‚úÖ `backend/deploy.sh` - Deployment script
- ‚úÖ `backend/logs/` - Logging k√∂nyvt√°r (automatikusan l√©trej√∂n)

### 4. GitHub-ra push

```bash
git add .
git commit -m "Production deployment konfigur√°ci√≥"
git push origin main
```

---

## üß™ Tesztel√©s

### 1. Backend API tesztel√©se

```bash
# Alapvet≈ë API teszt
curl https://halloween-treasure-hunter.onrender.com/api/games/

# Rate limiting teszt
curl -v https://halloween-treasure-hunter.onrender.com/api/player/check-session/

# Health check
curl https://halloween-treasure-hunter.onrender.com/admin/
```

### 2. Production teljes√≠tm√©ny tesztel√©se

```bash
# Terhel√©ses teszt (opcion√°lis)
cd backend
python load_test.py
```

**V√°rhat√≥ eredm√©nyek production-ben:**
- ‚úÖ 200-500 egyidej≈± felhaszn√°l√≥ t√°mogat√°s
- ‚úÖ 25-50 egyidej≈± j√°t√©k
- ‚úÖ Rate limiting m≈±k√∂dik
- ‚úÖ Security headers akt√≠vak

### 3. Frontend tesztel√©se

1. **Nyisd meg** a frontend URL-t
2. **Teszteld** a j√°t√©k funkcionalit√°st
3. **Ellen≈ërizd** a konzol hib√°kat
4. **Teszteld** a rate limiting-et (t√∂bb gyors k√©r√©s)

### 4. Teljes funkcionalit√°s tesztel√©se

1. **J√°t√©k l√©trehoz√°sa** (Admin)
2. **J√°t√©kos regisztr√°ci√≥**
3. **QR k√≥d beolvas√°s**
4. **J√°t√©k v√©gigj√°tsz√°sa**
5. **Logok ellen≈ërz√©se** (Backend Service ‚Üí Logs)

---

## üö® Hibaelh√°r√≠t√°s

### Gyakori probl√©m√°k:

1. **Build Error**: 
   - Ellen≈ërizd a `requirements.txt` √©s `package.json`
   - Gy≈ëz≈ëdj meg r√≥la, hogy a `gunicorn.conf.py` l√©tezik

2. **CORS Error**: 
   - Friss√≠tsd a CORS be√°ll√≠t√°sokat
   - Ellen≈ërizd az `ALLOWED_HOSTS` √©s `CORS_ALLOWED_ORIGINS`

3. **Database Error**: 
   - Ellen≈ërizd a `DATABASE_URL`
   - Futtasd `python manage.py migrate`

4. **Static Files Error**: 
   - Futtasd `collectstatic`-ot
   - Ellen≈ërizd a `STATIC_ROOT` be√°ll√≠t√°st

5. **Rate Limiting Error**: 
   - Ellen≈ërizd a rate limiting environment v√°ltoz√≥kat
   - Logokban keresd a "Rate limit exceeded" √ºzeneteket

6. **Gunicorn Error**: 
   - Ellen≈ërizd a `gunicorn.conf.py` f√°jlt
   - Gy≈ëz≈ëdj meg r√≥la, hogy a `GUNICORN_WORKERS` be van √°ll√≠tva

### Logok ellen≈ërz√©se:

1. **Backend Service** ‚Üí **Logs**
2. **Frontend Service** ‚Üí **Logs**  
3. **Database Service** ‚Üí **Logs**

**Fontos**: A production logging m√°r be van √°ll√≠tva, r√©szletes logokat tal√°lsz!

---

## üéâ Sikeres Deployment!

**Backend URL**: `https://halloween-treasure-hunter.onrender.com`
**Frontend URL**: `https://halloween-treasure-hunter-frontend.onrender.com`

### Production kapacit√°s:
- ‚úÖ **200-500 egyidej≈± felhaszn√°l√≥**
- ‚úÖ **25-50 egyidej≈± j√°t√©k**
- ‚úÖ **Rate limiting akt√≠v**
- ‚úÖ **Security headers be√°ll√≠tva**
- ‚úÖ **Logging √©s monitoring**

### K√∂vetkez≈ë l√©p√©sek:

1. **Custom domain** be√°ll√≠t√°sa (opcion√°lis)
2. **SSL certificate** automatikus
3. **Monitoring** be√°ll√≠t√°sa
4. **Backup** strat√©gia
5. **Redis cache** hozz√°ad√°sa (teljes√≠tm√©ny jav√≠t√°s)
6. **CDN** be√°ll√≠t√°sa (static files gyors√≠t√°s)

### Performance monitoring:

```bash
# Teljes√≠tm√©ny ellen≈ërz√©se
curl -w "@curl-format.txt" -o /dev/null -s https://halloween-treasure-hunter.onrender.com/api/games/

# Rate limiting teszt
for i in {1..10}; do curl -s https://halloween-treasure-hunter.onrender.com/api/player/check-session/; done
```

---

## üìû Seg√≠ts√©g sz√ºks√©g eset√©n

- **Render.com Documentation**: https://render.com/docs
- **Django Deployment**: https://docs.djangoproject.com/en/stable/howto/deployment/
- **React Deployment**: https://create-react-app.dev/docs/deployment/

**Sikeres deployment-et! üöÄüéÉ**
