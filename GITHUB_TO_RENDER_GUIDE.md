# üéÉ Halloween Treasure Hunter - GitHub ‚Üí Render.com Deployment Guide

## üìã El≈ëk√©sz√≠t√©s

### 1. GitHub Repository l√©trehoz√°sa

1. **GitHub.com** ‚Üí **New Repository**
2. **Repository name**: `treasurehunter` (vagy tetsz≈ëleges n√©v)
3. **Description**: `üéÉ Halloween-themed treasure hunting game with React frontend and Django backend`
4. **Public** ‚úÖ (aj√°nlott portfolio miatt)
5. **Add README** ‚úÖ
6. **Create repository**

### 2. Lok√°lis repository √∂sszekapcsol√°sa

```bash
# A projekt mapp√°j√°ban
git init
git add .
git commit -m "Initial commit: Halloween Treasure Hunter game"

# GitHub repository hozz√°ad√°sa
git remote add origin https://github.com/[USERNAME]/treasurehunter.git
git branch -M main
git push -u origin main
```

---

## üöÄ Render.com Modern Deployment (Django + React Egy√ºtt)

### 1. Render.com regisztr√°ci√≥

1. **Render.com** ‚Üí **Sign Up**
2. **GitHub** fi√≥kkal bejelentkez√©s
3. **Authorize** Render alkalmaz√°s

### 2. PostgreSQL Database l√©trehoz√°sa

1. **Dashboard** ‚Üí **New** ‚Üí **PostgreSQL**
2. **Name**: `treasurehunt-db`
3. **Database**: `treasurehunt`
4. **User**: `treasurehunt_user`
5. **Region**: `Frankfurt (EU Central)` (aj√°nlott)
6. **Plan**: `Free` (kezd√©shez)
7. **Create Database**

### 3. Web Service l√©trehoz√°sa (Django + React Egy√ºtt)

1. **Dashboard** ‚Üí **New** ‚Üí **Web Service**
2. **Connect GitHub** ‚Üí **treasurehunter** repository
3. **Root Directory**: `backend` (marad!)
4. **Environment**: `Python 3`
5. **Build Command**:
   ```bash
   cd ../frontend && npm install && npm run build && cd ../backend && pip install -r requirements.txt && python manage.py collectstatic --noinput --verbosity=2 && python manage.py migrate
   ```
6. **Start Command**:
   ```bash
   gunicorn --config gunicorn.conf.py config.wsgi:application
   ```
7. **Publish Directory**: `backend` (marad!)

**Fontos**: A `gunicorn.conf.py` f√°jl m√°r tartalmazza a production be√°ll√≠t√°sokat!

### 4. Environment Variables be√°ll√≠t√°sa

**Service Settings** ‚Üí **Environment**:

```bash
SECRET_KEY=django-insecure-your-new-secret-key-here-make-it-long-and-random
DEBUG=False
DATABASE_URL=postgresql://treasurehunt_user:password@host:port/treasurehunt

# Production optimaliz√°l√°s
GUNICORN_WORKERS=2
GUNICORN_BIND=0.0.0.0:$PORT
GUNICORN_LOG_LEVEL=info

# Redis cache (opcion√°lis, de aj√°nlott)
REDIS_URL=redis://red-xxxxx:6379

# Rate limiting (production √©rt√©kek)
RATE_LIMIT_ANON=200/hour
RATE_LIMIT_USER=1000/hour
RATE_LIMIT_API=500/hour
RATE_LIMIT_GAME=100/hour
RATE_LIMIT_QR=50/hour
```

**Fontos**: A `DATABASE_URL` automatikusan gener√°l√≥dik a PostgreSQL service-ben!
**Megjegyz√©s**: Redis opcion√°lis, de javasolt a jobb teljes√≠tm√©ny√©rt!

### 5. Deploy √©s Tesztel√©s

1. **Create Web Service**
2. **V√°rj** a build-re (3-5 perc)
3. **Ellen≈ërizd** a logokat hib√°k√©rt
4. **Jegyezd fel** a service URL-t: `https://treasurehunt-game.onrender.com`

---

## üîß Modern Architekt√∫ra Magyar√°zata

### Mi√©rt egyetlen Web Service?

#### **A. Egyszer≈±bb kezel√©s:**
- ‚úÖ **Egyetlen URL**: `treasurehunt-game.onrender.com`
- ‚úÖ **Egyetlen deploy**: Frontend + Backend egy√ºtt
- ‚úÖ **Nincs CORS probl√©ma**: Minden ugyanazon a domain-en
- ‚úÖ **Egyszer≈±bb domain be√°ll√≠t√°s**: Egyetlen service

#### **B. Django szolg√°lja ki a frontend-et:**
- ‚úÖ **Frontend build**: `npm run build` ‚Üí `../backend/static`
- ‚úÖ **Django collectstatic**: `staticfiles` mapp√°ba m√°solja
- ‚úÖ **Django URL routing**: `/` ‚Üí React alkalmaz√°s
- ‚úÖ **Static files**: `/static/` ‚Üí CSS, JS, k√©pek

#### **C. Production optimaliz√°ci√≥:**
- ‚úÖ **Gunicorn**: Production WSGI server
- ‚úÖ **PostgreSQL**: Sk√°l√°zhat√≥ adatb√°zis
- ‚úÖ **Redis**: Cache √©s session storage
- ‚úÖ **Rate limiting**: API v√©delem

---

## ‚öõÔ∏è Frontend Build Folyamat

### 1. Vite Configuration

**frontend/vite.config.js**:
```javascript
export default defineConfig({
  plugins: [react(), tailwindcss()],
  build: {
    outDir: '../backend/static',  // Django static mapp√°ba
    emptyOutDir: true,
    assetsDir: 'assets',
    rollupOptions: {
      output: {
        entryFileNames: 'assets/index.js',
        chunkFileNames: 'assets/[name].js',
        assetFileNames: 'assets/[name].[ext]'
      }
    }
  }
})
```

### 2. Django Static Files

**backend/config/settings.py**:
```python
STATIC_URL = '/static/'
STATIC_ROOT = BASE_DIR / 'staticfiles'
STATICFILES_DIRS = [
    BASE_DIR / 'static',  # Frontend build ide ker√ºl
]
```

### 3. Django URL Routing

**backend/config/urls.py**:
```python
urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('treasurehunt.urls')),
    # React alkalmaz√°s szolg√°ltat√°sa
    path('', TemplateView.as_view(template_name='index.html')),
]
```

---

## üîÑ K√≥d friss√≠t√©sek

### 1. Backend settings.py friss√≠t√©se

```python
# backend/config/settings.py
ALLOWED_HOSTS = [
    'localhost',
    '127.0.0.1',
    'treasurehunt-game.onrender.com',  # Render service
    '.onrender.com',  # Minden Render subdomain
]

CORS_ALLOWED_ORIGINS = [
    "http://localhost:5173",
    "http://127.0.0.1:5173",
    "https://treasurehunt-game.onrender.com",  # Render service
]

# Production security headers m√°r be√°ll√≠tva
# Logging konfigur√°ci√≥ m√°r be√°ll√≠tva
# Rate limiting m√°r optimaliz√°lva
```

### 2. Frontend API URL (automatikus)

A frontend automatikusan a jelenlegi domain-t haszn√°lja API h√≠v√°sokhoz, nincs sz√ºks√©g k√ºl√∂n be√°ll√≠t√°sra.

### 3. Production deployment ellen≈ërz√©se

**Fontos**: Ellen≈ërizd, hogy ezek a f√°jlok l√©teznek:
- ‚úÖ `backend/gunicorn.conf.py` - Production Gunicorn konfigur√°ci√≥
- ‚úÖ `backend/requirements.txt` - Python dependencies
- ‚úÖ `frontend/package.json` - Node.js dependencies
- ‚úÖ `frontend/vite.config.js` - Frontend build konfigur√°ci√≥

### 4. GitHub-ra push

```bash
git add .
git commit -m "Production deployment konfigur√°ci√≥"
git push origin main
```

---

## üß™ Tesztel√©s

### 1. Backend API tesztel√©se

```bash
# Alapvet≈ë API teszt
curl https://treasurehunt-game.onrender.com/api/games/

# Rate limiting teszt
curl -v https://treasurehunt-game.onrender.com/api/player/check-session/

# Health check
curl https://treasurehunt-game.onrender.com/admin/
```

### 2. Frontend tesztel√©se

1. **Nyisd meg** a service URL-t: `https://treasurehunt-game.onrender.com`
2. **Teszteld** a j√°t√©k funkcionalit√°st
3. **Ellen≈ërizd** a konzol hib√°kat
4. **Teszteld** a rate limiting-et (t√∂bb gyors k√©r√©s)

### 3. Teljes funkcionalit√°s tesztel√©se

1. **J√°t√©k l√©trehoz√°sa** (Admin)
2. **J√°t√©kos regisztr√°ci√≥**
3. **QR k√≥d beolvas√°s**
4. **J√°t√©k v√©gigj√°tsz√°sa**
5. **Logok ellen≈ërz√©se** (Service ‚Üí Logs)

---

## üö® Hibaelh√°r√≠t√°s

### Gyakori probl√©m√°k:

1. **Build Error**: 
   - Ellen≈ërizd a `requirements.txt` √©s `package.json`
   - Gy≈ëz≈ëdj meg r√≥la, hogy a `gunicorn.conf.py` l√©tezik
   - Ellen≈ërizd a `vite.config.js` be√°ll√≠t√°sokat

2. **Frontend nem t√∂lt be**: 
   - Ellen≈ërizd a `frontend/vite.config.js` `outDir` be√°ll√≠t√°st
   - Futtasd `python manage.py collectstatic --noinput`
   - Ellen≈ërizd a `STATIC_ROOT` be√°ll√≠t√°st

3. **Database Error**: 
   - Ellen≈ërizd a `DATABASE_URL`
   - Futtasd `python manage.py migrate`

4. **Static Files Error**: 
   - Futtasd `collectstatic`-ot
   - Ellen≈ërizd a `STATIC_ROOT` be√°ll√≠t√°st

5. **Rate Limiting Error**: 
   - Ellen≈ërizd a rate limiting environment v√°ltoz√≥kat
   - Logokban keresd a "Rate limit exceeded" √ºzeneteket

6. **Gunicorn Error**: 
   - Ellen≈ërizd a `gunicorn.conf.py` f√°jlt
   - Gy≈ëz≈ëdj meg r√≥la, hogy a `GUNICORN_WORKERS` be van √°ll√≠tva

7. **"vite: not found" Error**: 
   - Ellen≈ërizd, hogy a Build Command tartalmazza az `npm install`-t
   - Build Command: `cd ../frontend && npm install && npm run build && ...`

8. **"cd: backend: No such file or directory" Error**: 
   - Ellen≈ërizd, hogy a Start Command NEM tartalmazza a `cd backend`-et
   - Start Command: `gunicorn --config gunicorn.conf.py config.wsgi:application`

9. **"Not Found: /static/assets/index.css" Error**: 
   - Ellen≈ërizd, hogy a `backend/config/urls.py` tartalmazza a statikus f√°jlok routing-ot
   - Gy≈ëz≈ëdj meg r√≥la, hogy a `collectstatic` sikeresen lefutott
   - Ellen≈ërizd a `STATIC_ROOT` √©s `STATIC_URL` be√°ll√≠t√°sokat
   - **Megold√°s**: `urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)` minden m√≥dban

### Gyors Jav√≠t√°sok:

#### **Build Command (Render Dashboard):**
```bash
cd ../frontend && npm install && npm run build && cd ../backend && pip install -r requirements.txt && python manage.py collectstatic --noinput --verbosity=2 && python manage.py migrate
```

#### **Start Command (Render Dashboard):**
```bash
gunicorn --config gunicorn.conf.py config.wsgi:application
```

#### **Environment Variables (Render Dashboard):**
```bash
SECRET_KEY=django-insecure-your-new-secret-key-here-make-it-long-and-random
DEBUG=False
DATABASE_URL=postgresql://treasurehunt_user:password@host:port/treasurehunt
```

### Logok ellen≈ërz√©se:

1. **Web Service** ‚Üí **Logs**
2. **Database Service** ‚Üí **Logs**

**Fontos**: A production logging m√°r be van √°ll√≠tva, r√©szletes logokat tal√°lsz!

---

## üéâ Sikeres Deployment!

**Service URL**: `https://treasurehunt-game.onrender.com`

### Production kapacit√°s:
- ‚úÖ **200-500 egyidej≈± felhaszn√°l√≥**
- ‚úÖ **25-50 egyidej≈± j√°t√©k**
- ‚úÖ **Rate limiting akt√≠v**
- ‚úÖ **Security headers be√°ll√≠tva**
- ‚úÖ **Logging √©s monitoring**

### K√∂vetkez≈ë l√©p√©sek:

1. **Custom domain** be√°ll√≠t√°sa (opcion√°lis)
2. **SSL certificate** automatikus
3. **Monitoring** be√°ll√≠t√°sa
4. **Backup** strat√©gia
5. **Redis cache** hozz√°ad√°sa (teljes√≠tm√©ny jav√≠t√°s)

### Performance monitoring:

```bash
# Teljes√≠tm√©ny ellen≈ërz√©se
curl -w "@curl-format.txt" -o /dev/null -s https://treasurehunt-game.onrender.com/api/games/

# Rate limiting teszt
for i in {1..10}; do curl -s https://treasurehunt-game.onrender.com/api/player/check-session/; done
```

---

## üìû Seg√≠ts√©g sz√ºks√©g eset√©n

- **Render.com Documentation**: https://render.com/docs
- **Django Deployment**: https://docs.djangoproject.com/en/stable/howto/deployment/
- **Vite Build**: https://vitejs.dev/guide/build.html

**Sikeres deployment-et! üöÄüéÉ**
